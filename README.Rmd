---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
library(manynet)
list_functions <- function(string){
  paste0("`", paste(paste0(ls("package:autograph")[grepl(string, ls("package:autograph"))], "()"), collapse = "`, `"), "`")
}
list_data <- function(string){
  paste0("`", paste(paste0(ls("package:autograph")[grepl(string, ls("package:autograph"))]), collapse = "`, `"), "`")
}
```

# autograph 
<img src="man/figures/logo.png" align="right" alt="autograph logo" width="150"/>

<!-- badges: start -->
[![Lifecycle: maturing](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://lifecycle.r-lib.org/articles/stages.html#maturing)
![CRAN/METACRAN](https://img.shields.io/cran/v/autograph)
![GitHub release (latest by date)](https://img.shields.io/github/v/release/stocnet/autograph)
![GitHub Release Date](https://img.shields.io/github/release-date/stocnet/autograph)
[![Codecov test coverage](https://codecov.io/gh/stocnet/autograph/branch/main/graph/badge.svg)](https://app.codecov.io/gh/stocnet/autograph?branch=main)
<!-- [![CodeFactor](https://www.codefactor.io/repository/github/stocnet/manynet/badge)](https://www.codefactor.io/repository/github/stocnet/manynet) -->
<!-- [![CII Best Practices](https://bestpractices.coreinfrastructure.org/projects/4559/badge)](https://bestpractices.coreinfrastructure.org/projects/4559) -->
<!-- [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.7076396.svg)](https://doi.org/10.5281/zenodo.7076396) -->
<!-- see https://zenodo.org/record/7076396 -->
<!-- ![GitHub All Releases](https://img.shields.io/github/downloads/stocnet/migraph/total) -->
<!-- badges: end -->

## About the package

This package aims to make exploration, analysis, and publication of results
from any of the stocnet packages easier, faster, and more consistent.
It does this by letting you simply set a theme,
say for your institution,
and then those palettes will be used whenever you use `plot()` or `graphr()`
on an object created in one of the relevant packages.

## Setting a theme

It is very easy to set a theme.
Just type `stocnet_theme()` to see which is the theme currently set,
and to get a list of available themes.
Then enter the chosen theme name in the function to set it.
All plots created using `{autograph}` functions will then use this theme,
until you change it again.

```{r themeset, dpi = 300, fig.height=5, fig.alt="Themed figures"}
library(autograph)
library(patchwork)
stocnet_theme()
(plot(node_degree(ison_karateka)) + 
plot(tie_betweenness(ison_karateka)))/
(plot(node_in_regular(ison_southern_women, "e")) + 
plot(as_matrix(ison_southern_women),
     membership = node_in_regular(ison_southern_women, "e")))
stocnet_theme("ethz")
(plot(node_degree(ison_karateka)) + 
plot(tie_betweenness(ison_karateka)))/
(plot(node_in_regular(ison_southern_women, "e")) + 
plot(as_matrix(ison_southern_women),
     membership = node_in_regular(ison_southern_women, "e")))
```

## Mapping

`{autograph}` includes three one-line graphing functions with sensible defaults based on 
the network's properties.

### graphr

First, `graphr()` is used to graph networks in any of the `{manynet}` formats.
It includes sensible defaults so that researchers can view their network's structure
or distribution quickly with a minimum of fuss.
Compare the output from `{autograph}` with a similar default from `{igraph}`:

<img src="https://www.jameshollway.com/post/manynet/README-layout-comparison-1.png" alt="Example illustrating differences in default igraph and autograph graphs"/>

```{r layout-comparison, echo = FALSE, message=FALSE, dpi = 250, fig.height=4, eval = FALSE}
library(autograph)
library(igraph)
library(gridBase)
library(grid)

par(mfrow=c(1, 2), mai = c(0,0,0.5,0))
plot(as_igraph(ison_southern_women), layout = layout_as_bipartite, main = "{igraph} bipartite")
## the last one is the current plot
plot.new()              ## suggested by @Josh
vps <- baseViewports()
pushViewport(vps$figure) ##   I am in the space of the autocorrelation plot
vp1 <-plotViewport(c(1.8,1,0,1)) ## create new vp with margins, you play with this values 
p <- graphr(ison_southern_women) + ggtitle("{autograph} twomode")
print(p,vp = vp1) 
```

Here the `{autograph}` function recognises that the network is a two-mode network
and uses a bipartite layout by default,
and recognises that the network contains names for the nodes and
prints them vertically so that they are legible in this layout.
Other 'clever' features include automatic node sizing and more.
By contrast, `{igraph}` requires the bipartite layout to be specified, has cumbersome node size defaults for all but the smallest graphs, and labels also very often need resizing and adjustment to avoid overlap.
All of `{autograph}`'s adjustments can be overridden, however...

#### More options

Changing the size and colors of nodes and ties is as easy as 
specifying the function's relevant argument with a replacement,
or indicating from which attribute it should inherit this information.

<img src="https://www.jameshollway.com/post/manynet/README-more-options-1.png" alt="Graph illustrating automatic and manual use of node color and size"/>

```{r more-options, echo = FALSE, message=FALSE, dpi = 300, fig.height=3, eval=FALSE}
graphr(ison_lawfirm, node_color = "darkblue", node_size = 6) + 
  ggtitle("Manual options", 
          subtitle = "graphr(ison_lawfirm, node_color = 'darkblue', node_size = 6)") +
graphr(mutate(ison_lawfirm, Seniority = Seniority/3), node_color = "Office", node_size = "Seniority") + 
  ggtitle("Automatic options", 
          subtitle = "graphr(ison_lawfirm, node_color = 'Office', node_size = 'Seniority')") & 
  theme(plot.subtitle = element_text(size = 8))
```

#### More layouts

`{autograph}` can use all the layout algorithms offered by packages such as `{igraph}`, `{ggraph}`, and `{graphlayouts}`,
and offers some additional layout algorithms for
snapping layouts to a grid, 
visualising partitions horizontally, vertically, or concentrically,
or conforming to configurational coordinates.

<img src="https://www.jameshollway.com/post/manynet/README-more-layouts-1.png" alt="Graphs illustrating different layouts"/>

```{r more-layouts, echo = FALSE, message=FALSE, dpi = 250, eval=FALSE}
(graphr(ison_southern_women, layout = "concentric") + ggtitle("Concentric layout")) /
  ((graphr(to_unnamed(create_explicit(A-+B-+C, A-+C))) + ggtitle("Triad layout")) |
  (graphr(to_unnamed(create_explicit(A-+C, A-+D, B-+C, B-+D))) + ggtitle("Quad layout")))
```

### graphs

Second, `graphs()` is used to graph multiple networks together,
which can be useful for ego networks or network panels.
`{patchwork}` is used to help arrange individual plots together.

<img src="https://www.jameshollway.com/post/manynet/README-autographs-1.png" alt="Example of graphs() used on longitudinal data"/>

```{r autographs, echo = FALSE, dpi = 250, fig.height=3, eval=FALSE}
ison_adolescents %>%
  mutate_ties(wave = c(rep(1995, 5), rep(1998, 5))) %>%
  to_waves(attribute = "wave", panels = c(1995, 1998)) %>%
  graphs()
```

### grapht

Third, `grapht()` is used to visualise dynamic networks.
It uses `{gganimate}` and `{gifski}` to create a gif that
visualises network changes over time.
It really couldn't be easier.

<img src="https://www.jameshollway.com/post/manynet/README-autographd-1.gif" alt="Example of grapht() on longitudinal data"/>

```{r autographd, echo = FALSE, dpi = 250, fig.height=3.5, eval=FALSE}
ison_adolescents %>%
  mutate_ties(year = sample(1995:1998, 10, replace = TRUE)) %>%
  to_waves(attribute = "year") %>%
  grapht()
```

<!-- provide a common set of tools that can be used to import, export, create, and manipulate network data in a wide variety of formats, -->
<!-- and obtain a good first visualisation quickly. -->
<!-- This can be useful for pedagogical purposes, initial description, or checking something part way through the modelling process. -->
<!-- Through the most comprehensive network class-coercion available, -->
<!-- users can access routines not available in their chosen package or even in `{manynet}`. -->

<!-- `{manynet}` provides a common set of tools and a standard syntax for analysing many different types of networks. -->
<!-- It offers a broad range of functions to make, manipulate, map, measure, and model: -->

<!-- - one-, two-, and sometimes three-mode networks -->
<!-- - undirected, directed, and sometimes complex networks -->
<!-- - unweighted, weighted, and sometimes signed networks -->

## Installation

### Stable

The easiest way to install the latest stable version of `{autograph}` is via CRAN.
Simply open the R console and enter:

`install.packages('autograph')`

`library(autograph)` will then load the package and make the data and tutorials (see below) contained within the package available.

### Development

For the latest development version, 
for slightly earlier access to new features or for testing,
you may wish to download and install the binaries from Github
or install from source locally.
The latest binary releases for all major OSes -- Windows, Mac, and Linux -- 
can be found [here](https://github.com/stocnet/autograph/releases/latest).
Download the appropriate binary for your operating system,
and install using an adapted version of the following commands:

- For Windows: `install.packages("~/Downloads/autograph_winOS.zip", repos = NULL)`
- For Mac: `install.packages("~/Downloads/autograph_macOS.tgz", repos = NULL)`
- For Unix: `install.packages("~/Downloads/autograph_linuxOS.tar.gz", repos = NULL)`

To install from source the latest main version of `{autograph}` from Github, 
please install the `{remotes}` package from CRAN and then:

- For latest stable version: 
`remotes::install_github("stocnet/autograph")`
- For latest development version: 
`remotes::install_github("stocnet/autograph@develop")`

### Other sources

Those using Mac computers may also install using Macports:

`sudo port install R-autograph`

## Funding details

Development on this package has been funded by the Swiss National Science Foundation (SNSF)
[Grant Number 188976](https://data.snf.ch/grants/grant/188976): 
"Power and Networks and the Rate of Change in Institutional Complexes" (PANARCHIC).
